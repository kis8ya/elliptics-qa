---
- hosts: servers
  tasks:
    - name: Wipe out Elliptics data
      file: path={{ item }} state=absent
      with_items:
        - "{{ log_dir }}"
        - "{{ data_dir }}"
        - "{{ hist_dir }}"

    - name: Recreate necessary directories
      file: path={{ item }} state=directory
      with_items:
        - "{{ log_dir }}"
        - "{{ data_dir }}"
        - "{{ hist_dir }}"

    - name: Create data file
      file: path={{ data_dir }}/data state=touch

- include: ../elliptics-start.yml
